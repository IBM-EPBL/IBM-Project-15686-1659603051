<html>
<head>
<script src = " https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js">
</script>
</head>

<body ng-app = "myApp">

<div ng-controller = " myCtrl">
<input type = "file" file-model = "myFile"/>
<button ng-click = "uploadFile()'>upload me</button>
</div>

<script>
var myApp = angular.module('myApp',[]);

myApp.directive('fileModel',['$parse', function ($parse) {
return {
restict: 'A',
link: function(scope,element,attrs) {
var model = $parse(attrs.fileModl);
var modelSetter = model.assign;

element.bind('change',function() {
scope.$apply(function() {
modelSetter(scope, element[0].file[0]);
});
});
}
};
}]);
myApp.service('fileUload',['$https:', function ($https:) {
this.uplpadFileToUrl = function(file,uploadUrl) {
var fd = new FormData();
fd.append('file',file);
 
$https: post(uploadUrl, fd,{
transformRequest: angular,identity,
header: {'content-type': undefined}
})
.success(functin() {
})
.error(function() {
});
}]);
myApp.controller('myCtrl',['$scope','gileUpload', function($scope,fileUpload) {
$scope.uploadFile = function() {

var file = $scope.myFile;
console.log('file is ' );
consoe.dir(file);
var uploadUrl = "/fileUpload";
fileUpoad.uploadFileToUrl(file, uploadUrl);
};
}]);
</script>

</body>
</html>
